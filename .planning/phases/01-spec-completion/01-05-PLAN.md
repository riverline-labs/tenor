---
phase: 01-spec-completion
plan: 05
type: execute
wave: 5
depends_on:
  - 01-04
files_modified:
  - docs/TENOR.md
autonomous: true
requirements:
  - SPEC-05

must_haves:
  truths:
    - "docs/TENOR.md header reads 'Tenor Language Specification v1.0'"
    - "All three CFFP artifacts are complete and cross-referenced from the spec"
    - "No breaking changes to existing construct semantics occurred during Phase 1"
    - "Spec is internally consistent — all cross-references between sections resolve correctly"
    - "Appendix A acknowledged limitations are complete and up to date"
  artifacts:
    - path: "docs/TENOR.md"
      provides: "Frozen v1.0 language specification"
      contains: "Specification v1.0"
    - path: "docs/cffp/persona.json"
      provides: "CFFP artifact for Persona"
      contains: "canonical"
    - path: "docs/cffp/p7-outcome-typing.json"
      provides: "CFFP artifact for P7"
      contains: "canonical"
    - path: "docs/cffp/p5-shared-types.json"
      provides: "CFFP artifact for P5"
      contains: "phase1"
  key_links:
    - from: "docs/TENOR.md"
      to: "docs/cffp/"
      via: "Spec sections derived from CFFP canonical forms"
      pattern: "CFFP|canonicalized"
    - from: "docs/TENOR.md"
      to: "docs/interchange-schema.json"
      via: "Spec references JSON Schema for interchange validation"
      pattern: "interchange-schema"
---

<objective>
Perform final spec review, ensure internal consistency, and freeze the spec as v1.0.

Purpose: The spec freeze is a hard gate — after this, no breaking changes to construct semantics are permitted without a new CFFP run. This plan verifies that all Phase 1 work is coherent and the spec is ready to serve as the stable foundation for all subsequent phases (Foundation, CLI, Evaluator, etc.).

Output: Updated `docs/TENOR.md` with v1.0 header and frozen status.
</objective>

<execution_context>
@/Users/bwb/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bwb/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-spec-completion/01-CONTEXT.md
@.planning/phases/01-spec-completion/01-01-SUMMARY.md
@.planning/phases/01-spec-completion/01-02-SUMMARY.md
@.planning/phases/01-spec-completion/01-03-SUMMARY.md
@.planning/phases/01-spec-completion/01-04-SUMMARY.md
@docs/TENOR.md
@docs/interchange-schema.json
@docs/cffp/persona.json
@docs/cffp/p7-outcome-typing.json
@docs/cffp/p5-shared-types.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Spec consistency review and cross-reference verification</name>
  <files>docs/TENOR.md</files>
  <action>
Perform a systematic review of docs/TENOR.md for internal consistency after all Phase 1 changes.

**1. Cross-reference verification:**
- Every section reference (e.g., "see Section 8", "see §10.2") points to the correct section after renumbering (if sections were added)
- Every construct name reference matches the actual construct name in its definition
- Every invariant or constraint reference (C1-C7) is accurate
- Every Appendix A limitation reference (AL1, AL2, ...) is accurate after additions/updates

**2. Construct dependency order verification (Section 3):**
- The dependency order in Section 3 is correct with Persona added
- Persona is placed correctly in the dependency chain (it should be above Operation since Operation references Persona)
- P7 outcome typing changes to Operation and Flow maintain the existing dependency order
- P5 shared type library changes to TypeDecl maintain the existing dependency order

**3. Consistency between CFFP canonical forms and spec sections:**
- Read each CFFP artifact (`docs/cffp/persona.json`, `docs/cffp/p7-outcome-typing.json`, `docs/cffp/p5-shared-types.json`)
- Verify the spec section for each construct matches its CFFP canonical form's `formal_statement` and `evaluation_def`
- Verify all `acknowledged_limitations` from CFFP artifacts appear in Appendix A
- Verify all `satisfies` invariants from CFFP artifacts are reflected in the spec's constraint definitions

**4. Interchange format consistency:**
- The interchange representation defined in each construct's spec section is consistent with the JSON Schema at `docs/interchange-schema.json`
- The `tenor_version` field semantics in the spec match the schema definition
- All construct kinds mentioned in the spec have corresponding schema definitions

**5. Section 16 (Pending Work) verification:**
- P5 and P7 entries updated from "Deferred to v2" status
- No pending work items remain that should have been addressed in Phase 1

**6. Design constraint compliance (Section 2):**
- Verify Persona satisfies C1-C7 (or has acknowledged limitations where it doesn't)
- Verify P7 outcome typing satisfies C1-C7
- Verify P5 shared types satisfies C1-C7 (or has acknowledged limitations)

**Fix any issues found.** This is an editorial and consistency pass, not a design pass. Do not make semantic changes — only fix cross-reference errors, missing limitations, inconsistent numbering, or gaps between CFFP artifacts and spec text.
  </action>
  <verify>
- All section cross-references in docs/TENOR.md resolve correctly
- CFFP canonical form content matches spec section content for all three constructs
- All CFFP acknowledged limitations appear in Appendix A
- Section 16 pending work items reflect current status
- Interchange schema and spec interchange descriptions are consistent
  </verify>
  <done>
docs/TENOR.md is internally consistent. All cross-references correct. CFFP canonical forms match spec sections. Acknowledged limitations complete. Pending work status current.
  </done>
</task>

<task type="auto">
  <name>Task 2: Freeze spec as v1.0</name>
  <files>docs/TENOR.md</files>
  <action>
Apply the spec freeze as defined in CONTEXT.md decisions.

**1. Update spec header:**
- Change "## Formal Specification v0.3" to "## Formal Specification v1.0" (or "Tenor Language Specification v1.0" per CONTEXT.md decision)
- Update the Status line: Remove "Pre-alpha" language. Replace with something like: "Status: v1.0 — Spec frozen. Core constructs canonicalized via CFFP. Conformance suite: 47/47 passing."
- Add changelog entry for v1.0: "v1.0 — Persona construct formalized (CFFP); Operation outcome typing (P7, CFFP); Shared type library (P5, CFFP); Interchange format versioned with JSON Schema."

**2. Update stability notice:**
Replace the current pre-release stability notice:
```
> **Stability: Pre-release (v0.3)**
> This specification is under active development. Breaking changes may occur
> without notice. ...
```
With a frozen stability notice:
```
> **Stability: Frozen (v1.0)**
> This specification is frozen. No breaking changes to existing construct
> semantics will occur without a new CFFP run. Additive changes (new analysis
> results, new interchange metadata) are permitted and documented in the
> changelog.
```

**3. Add freeze provenance:**
Add a brief section or note indicating:
- The CFFP artifacts that produced this spec version: `docs/cffp/persona.json`, `docs/cffp/p7-outcome-typing.json`, `docs/cffp/p5-shared-types.json`
- The date of spec freeze
- The rule: any change to construct semantics after this point requires a new CFFP run

**4. Verify construct count:**
Section 3 says "eleven constructs across three layers." Update this count if Persona was added as a new construct (making it twelve or however many are now defined). Ensure the count matches the actual number of constructs in the spec.

**5. Final TOC update:**
Ensure the Table of Contents is accurate and complete after all Phase 1 additions.
  </action>
  <verify>
- Spec header reads "v1.0" (not "v0.3")
- Stability notice updated from "Pre-release" to "Frozen"
- Changelog entry for v1.0 present
- CFFP artifact references present
- Construct count in Section 3 is accurate
- Table of Contents is complete and accurate
  </verify>
  <done>
docs/TENOR.md is frozen as v1.0. Header, stability notice, changelog, and construct count all reflect the v1.0 status. CFFP provenance documented. The spec is ready to serve as the stable foundation for Phase 2 (Foundation) and all subsequent phases.
  </done>
</task>

</tasks>

<verification>
1. docs/TENOR.md header reads "Tenor Language Specification v1.0" (or equivalent)
2. Stability notice says "Frozen" not "Pre-release"
3. All three CFFP artifacts exist and are referenced from the spec
4. All section cross-references are correct
5. Appendix A is complete with all acknowledged limitations
6. Section 16 pending work is current
7. Interchange schema and spec are consistent
8. Construct count is accurate
</verification>

<success_criteria>
- Spec is frozen as v1.0 with all Phase 1 additions complete
- Internal consistency verified — no dangling references, no missing limitations
- CFFP artifacts are the provenance record for all Phase 1 spec changes
- The spec is ready to serve as the immutable foundation for Phase 2+
</success_criteria>

<output>
After completion, create `.planning/phases/01-spec-completion/01-05-SUMMARY.md`
</output>
