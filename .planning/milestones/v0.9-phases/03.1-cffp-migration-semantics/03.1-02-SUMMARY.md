---
phase: 03.1-cffp-migration-semantics
plan: 02
subsystem: spec
tags: [migration, versioning, breaking-changes, taxonomy, spec-prose, tenor-md]

# Dependency graph
requires:
  - phase: 03.1-cffp-migration-semantics
    provides: "Complete CFFP run artifact (docs/cffp/migration-semantics.json) with breaking change taxonomy"
  - phase: 01-spec-completion
    provides: "TENOR.md v1.0 spec with all construct sections (1-16)"
provides:
  - "TENOR.md Section 17 (Versioning & Migration) with complete breaking change taxonomy"
  - "Executor migration obligations M1-M8 for contract version transitions"
  - "In-flight flow migration policy specification (Blue-Green, Force-Migrate, Abort)"
  - "Migration contract representation spec (hybrid DiffEntry JSON + optional Tenor contract)"
  - "AL37-AL43 acknowledged limitations for migration contracts"
affects: [04-static-analysis]

# Tech tracking
tech-stack:
  added: []
  patterns: [cffp-to-spec-prose-translation, taxonomy-table-per-construct-kind, obligation-numbering-M-series]

key-files:
  created: []
  modified:
    - docs/TENOR.md

key-decisions:
  - "Eight migration obligations (M1-M8) rather than six: added M7 (noise field exclusion) and M8 (set-semantic comparison) for implementation precision"
  - "Appendix A gains AL37-AL43 from CFFP scope narrowings — each limitation cross-references Section 17.5"
  - "Cross-reference from Section 13.2.1 to Section 17 distinguishing format versioning from content versioning"
  - "Pending Work (Section 18) gains MIGR-ORCH and MIGR-COMP deferred-to-v2 items"

patterns-established:
  - "CFFP-to-spec translation: canonical form formal_statement becomes structured spec prose with taxonomy tables"
  - "Acknowledged Limitations mirroring CFFP counterexample scope narrowings (CE -> AL mapping)"
  - "Migration obligation numbering (M-series) parallel to executor obligations (E-series)"

requirements-completed: [MIGR-04]

# Metrics
duration: 5min
completed: 2026-02-22
---

# Phase 3.1 Plan 02: CFFP Migration Semantics — Spec Prose Summary

**Versioning & Migration section (Section 17) in TENOR.md with breaking change taxonomy tables for all six construct kinds, M1-M8 executor obligations, three in-flight migration policies, and hybrid migration contract representation**

## Performance

- **Duration:** 5 min
- **Started:** 2026-02-22T00:17:22Z
- **Completed:** 2026-02-22T00:23:02Z
- **Tasks:** 2
- **Files modified:** 1

## Accomplishments

- New Section 17 (Versioning & Migration) with five subsections (17.1-17.5) translating the CFFP canonical form into authoritative spec prose
- Breaking change taxonomy tables for all six construct kinds (Fact, Entity, Rule, Persona, Operation, Flow) with per-field Add/Remove/Change classifications
- Eight numbered executor migration obligations (M1-M8) precise enough for implementer compliance verification
- In-flight flow migration policy specification defining three options (Blue-Green, Force-Migrate, Abort) as executor deployment obligations
- Seven new Acknowledged Limitations (AL37-AL43) documenting migration contract scope narrowings from CFFP pressure testing

## Task Commits

Each task was committed atomically:

1. **Task 1: Write Versioning & Migration spec section** - `4a2f5d2` (feat)
2. **Task 2: Update ToC, Appendix A, and cross-references** - `cae1ca2` (docs)

## Files Created/Modified

- `docs/TENOR.md` - New Section 17 (Versioning & Migration) with taxonomy tables, migration obligations, policy specification, and migration contract representation; ToC updated; Appendix A expanded with AL37-AL43; cross-references added between Sections 13.2.1, 16, and 17; former Sections 17-20 renumbered to 18-21

## Decisions Made

1. **Eight obligations instead of six:** Added M7 (noise field exclusion — provenance and line fields) and M8 (set-semantic comparison for states, allowed_personas) beyond the plan's M1-M6 minimum. These are implementation-critical obligations already established in diff.rs conventions that deserve spec-level formalization.

2. **AL37-AL43 numbering:** Each CFFP scope narrowing mapped to a distinct AL entry with cross-references to both the CFFP counterexample that produced it and the relevant Section 17 subsection.

3. **Section renumbering scope:** Appendix sections received numeric prefixes (19, 20, 21) matching their new ToC numbering, where previously they used only "Appendix A/B/C" headings.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Phase 3.1 (CFFP Migration Semantics) is now complete: Plan 01 produced the CFFP artifact, Plan 02 translated it into spec prose
- Phase 4 (Static Analysis) can reference Section 17 taxonomy for `tenor diff --breaking` implementation
- The taxonomy is immediately usable as a lookup table: given a DiffEntry from diff.rs, look up (kind, field, change_type) in Section 17.2 to get BREAKING/NON_BREAKING/REQUIRES_ANALYSIS
- M1-M8 obligations provide the conformance checklist for executor migration support

## Self-Check: PASSED

- FOUND: docs/TENOR.md
- FOUND: 03.1-02-SUMMARY.md
- FOUND: 4a2f5d2 (Task 1 commit)
- FOUND: cae1ca2 (Task 2 commit)

---
*Phase: 03.1-cffp-migration-semantics*
*Completed: 2026-02-22*
