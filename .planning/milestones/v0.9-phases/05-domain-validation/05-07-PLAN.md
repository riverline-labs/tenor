---
phase: 05-domain-validation
plan: 07
type: execute
wave: 2
depends_on:
  - 05-01
  - 05-02
  - 05-03
  - 05-04
  - 05-05
files_modified:
  - .planning/phases/05-domain-validation/05-SPEC-GAP-REPORT.md
autonomous: true
requirements:
  - DOMN-09

must_haves:
  truths:
    - "Spec gap report synthesizes all findings from all 5 domain contracts"
    - "Each gap has structured fields: domain, scenario, attempted, result, severity, suggested fix"
    - "Report distinguishes BLOCKER vs FRICTION vs COSMETIC severity"
    - "Report is actionable — provides clear direction for spec/toolchain fixes"
    - "Skipped scenarios are documented with extreme clarity"
  artifacts:
    - path: ".planning/phases/05-domain-validation/05-SPEC-GAP-REPORT.md"
      provides: "Synthesized spec gap report from domain validation"
      contains: "Gap"
  key_links:
    - from: ".planning/phases/05-domain-validation/05-SPEC-GAP-REPORT.md"
      to: ".planning/phases/05-domain-validation/gap-log.md"
      via: "synthesis of running gap log"
      pattern: "gap-log"
---

<objective>
Synthesize the spec gap report from all 5 domain validation contracts. This is the polished final report that aggregates findings from the running gap log accumulated during plans 05-01 through 05-05.

Purpose: DOMN-09 requirement. This report is the key deliverable of the domain validation phase — it tells the user what worked, what didn't, and what needs to change in the spec/toolchain before code generation begins.

Output: A structured gap report with severity classification, actionable recommendations, and clear documentation of any skipped scenarios.
</objective>

<execution_context>
@/Users/bwb/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bwb/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-domain-validation/05-CONTEXT.md
@.planning/phases/05-domain-validation/gap-log.md
@.planning/phases/05-domain-validation/05-01-SUMMARY.md
@.planning/phases/05-domain-validation/05-02-SUMMARY.md
@.planning/phases/05-domain-validation/05-03-SUMMARY.md
@.planning/phases/05-domain-validation/05-04-SUMMARY.md
@.planning/phases/05-domain-validation/05-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Synthesize spec gap report from domain validation findings</name>
  <files>
    .planning/phases/05-domain-validation/05-SPEC-GAP-REPORT.md
  </files>
  <action>
    Read the running gap log (`gap-log.md`) accumulated during plans 05-01 through 05-05. Also read each plan's SUMMARY to understand what was attempted and what worked.

    Create `05-SPEC-GAP-REPORT.md` with the following structure:

    **1. Executive Summary**
    - How many contracts authored: 5
    - How many elaborated successfully: N/5
    - How many passed `tenor check`: N/5
    - How many evaluated correctly: N/5
    - Total gaps found: N (B blockers, F friction, C cosmetic)
    - Overall assessment: Is the spec ready for code generation?

    **2. Domain Coverage Summary**
    A table showing which spec features were exercised by which contract:

    | Feature | SaaS | Healthcare | Supply Chain | Energy | Trade Finance |
    |---------|------|------------|--------------|--------|---------------|
    | TypeDecl Record | X | X | X | X | X |
    | ParallelStep | - | - | X | - | - |
    | Escalate | - | X | - | X | - |
    | Money types | - | - | - | X | X |
    | ... | ... | ... | ... | ... | ... |

    **3. Gaps by Severity**

    Group gaps into:
    - **BLOCKER:** Scenarios that could not be expressed at all. Include: what was attempted, why the language couldn't express it, what spec change would enable it.
    - **FRICTION:** Scenarios that were expressible but awkward or unintuitive. Include: the workaround used, why it's suboptimal, suggested improvement.
    - **COSMETIC:** Minor issues that don't block functionality. Include: the issue and suggested fix.

    Each gap entry must have the structured format from the research:
    ```
    ### GAP-NNN: [Short Title]
    - **Domain:** ...
    - **Scenario:** ...
    - **Attempted:** ...
    - **Result:** ...
    - **Severity:** ...
    - **Suggested Fix:** ...
    ```

    **4. Skipped Scenarios**
    List every scenario that was skipped because it couldn't be expressed, with:
    - What was being attempted
    - Why the language couldn't express it
    - What spec change would enable it (if known)
    - Whether this is a v1.0 blocker or a v2.0 consideration

    **5. Recommendations**
    - Which gaps should be fixed before Phase 6 (code generation)?
    - Which gaps are acceptable for v1.0?
    - Which gaps should be tracked for v2.0?
    - Is an iterative fix-and-retest cycle needed?

    **6. Feature Coverage Statistics**
    - Total Tenor construct types: N
    - Exercised by at least one contract: N
    - Exercised by multiple contracts: N
    - Never exercised: [list]

    **If the gap log is empty or has no significant issues:** The report should still be written, documenting the positive finding that all 5 domains were expressible without issues. This is itself an important result.
  </action>
  <verify>
    Read the final report and verify:
    1. Every gap from gap-log.md is included (none omitted)
    2. Severity classifications are defensible
    3. Skipped scenarios are documented with extreme clarity per user decision
    4. Recommendations are actionable
    5. Feature coverage matrix is accurate against the contracts
  </verify>
  <done>Spec gap report is complete, covers all 5 domains, all gaps from the running log are synthesized, severity is classified, and recommendations are actionable.</done>
</task>

</tasks>

<verification>
1. `05-SPEC-GAP-REPORT.md` exists and has all 6 sections
2. Every gap from gap-log.md appears in the report
3. Severity classifications (BLOCKER/FRICTION/COSMETIC) are present
4. Skipped scenarios have explicit documentation
5. Recommendations section provides clear direction for next steps
6. Feature coverage matrix matches actual contract content
</verification>

<success_criteria>
- Gap report is the polished synthesis of all domain validation findings
- Every gap is traceable to a specific domain, scenario, and attempted expression
- Blockers are clearly distinguished from friction and cosmetic issues
- Skipped scenarios are documented with extreme clarity
- Report provides a clear answer to: "Is the spec ready for code generation?"
</success_criteria>

<output>
After completion, create `.planning/phases/05-domain-validation/05-07-SUMMARY.md`
</output>
