# Roadmap: Tenor v0.9 → v1.0

## Overview

Tenor goes from a working v0.3 elaborator to a complete language toolchain across three milestones. **Milestone 1 (v0.9 Core)** delivers the frozen spec, core toolchain, domain validation, and documentation — everything needed to ship v0.9 with confidence. **Milestone 2 (v1.0 — System Construct)** adds the composition layer for multi-contract systems, gating the v1.0 freeze. **Milestone 3 (Developer Experience)** adds code generation (TypeScript, Rust, Go), a codegen guide, and VS Code/LSP tooling.

Work within each milestone is organized into phases. The first two phases stabilize what exists (spec completion via [CFFP](https://github.com/riverline-labs/iap) (Constraint-First Formalization Protocol), then extracting `tenor-core` from the monolith). Phases 3-4 build the evaluation and analysis engines, including contract versioning — `tenor diff` for structural interchange diffs (Phase 3), CFFP-derived breaking change taxonomy and spec versioning section (Phase 3.1), and `tenor diff --breaking` for migration analysis powered by S1-S8 (Phase 4). Phase 5 is the hard gate: real contracts across five domains must validate the spec before any code generation.

## Phases

**Phase Numbering:**
- Integer phases (1, 2, 3): Planned milestone work
- Decimal phases (2.1, 2.2): Urgent insertions (marked with INSERTED)

Decimal phases appear between their surrounding integers in numeric order.

### Milestone 1: v0.9 Core (COMPLETE)
*Spec + toolchain + domain validation. Gate: "safe to ship v0.9."*

- [x] **Phase 1: Spec Completion** - CFFP-driven formalization of persona, outcome typing, shared types, and interchange versioning
- [x] **Phase 2: Foundation** - Extract tenor-core library crate, establish Cargo workspace, extend conformance suite (completed 2026-02-21)
- [x] **Phase 3: CLI + Evaluator** - Unified `tenor` binary with core subcommands, provenance-traced evaluator, and `tenor diff`
- [x] **Phase 3.1: CFFP — Migration Semantics (INSERTED)** - Breaking change taxonomy and versioning spec section via CFFP
- [x] **Phase 3.2: Technical Debt, Bug Fixes & Missing Eval Features (INSERTED)** - Critical bugs, deferred eval features, tech debt cleanup
- [x] **Phase 3.3: CFFP — Flow Migration Compatibility (INSERTED)** - Formal flow-level migration compatibility definition and coexistence layer pattern
- [x] **Phase 3.4: Contract Discovery (INSERTED)** - Manifest JSON Schema, `tenor elaborate --manifest` flag, §18 tooling support
- [x] **Phase 4: Static Analysis** - S1-S8 analysis suite with structured output, `tenor check`, and `tenor diff --breaking`
- [x] **Phase 5: Domain Validation** - Five real contracts across distinct domains proving spec completeness (completed 2026-02-22)
- [x] **Phase 5.1: Fix Critical DSL Gaps (INSERTED)** - Effect-to-outcome mapping, exists quantifier, S6 escalation fix, CLI flow eval (completed 2026-02-22)

### Milestone 2: v1.0 — System Construct + Documentation
*Multi-contract composition layer and v1.0 documentation. Gate: "v1.0 spec freeze + docs ship."*

- [ ] **Phase 12: System Construct** - CFFP-driven design of System construct for multi-contract composition (shared persona identity, cross-contract flow triggers, cross-contract entity relationships), spec section, elaborator support, interchange representation, static analysis extensions, executor obligations, conformance tests
- [ ] **Phase 6: Documentation** - Language reference, authoring guide, executor guide (covers full v1.0 spec including System construct)

### Milestone 3: Developer Experience
*Code generation, IDE tooling, and codegen documentation.*

- [ ] **Phase 7: TypeScript Code Generation** - Ports-and-adapters TypeScript target with local adapter package
- [ ] **Phase 8: Rust Code Generation** - Rust code generation target with conformance parity
- [ ] **Phase 9: Go Code Generation** - Go code generation target with conformance parity
- [ ] **Phase 10: Code Generation Guide** - Documentation for the ports-and-adapters pattern and custom adapters
- [ ] **Phase 11: VS Code Extension** - Syntax highlighting, inline errors, check-on-save, go-to-definition

## Phase Details

### Phase 1: Spec Completion
**Goal**: The Tenor v1.0 language specification is complete and frozen -- persona, outcome typing, and shared types are formally designed through CFFP, and the interchange format is versioned with a JSON Schema
**Depends on**: Nothing (first phase)
**Requirements**: SPEC-01, SPEC-02, SPEC-03, SPEC-04, SPEC-05
**Success Criteria** (what must be TRUE):
  1. Persona construct has formal syntax, semantics, and interchange representation in `docs/TENOR.md`
  2. Operation outcome types are statically enumerable with named variants specified in the spec
  3. Shared type library has import semantics for cross-contract Record and TaggedUnion reuse
  4. Interchange JSON includes `tenor_version` field and validates against a published JSON Schema
  5. Each of SPEC-01, SPEC-02, SPEC-03 has a completed CFFP artifact (invariants declared, candidates tested, canonical form chosen)
**Plans:** 5/5 plans complete

Plans:
- [x] 01-01-PLAN.md — CFFP run for Persona construct + spec section
- [x] 01-02-PLAN.md — CFFP run for P7 Operation outcome typing + spec updates
- [x] 01-03-PLAN.md — CFFP run for P5 Shared type library + spec section
- [x] 01-04-PLAN.md — Interchange versioning semantics + JSON Schema
- [x] 01-05-PLAN.md — Spec consistency review and v1.0 freeze

### Phase 01.1: Spec CI — AI Ambiguity Testing (INSERTED)

**Goal:** A Rust-based CI harness feeds the frozen v1.0 spec + sample contracts to a frontier LLM, asks it to evaluate against sample facts, and compares verdicts against ground truth from the elaborator — catching spec ambiguities before the CLI and evaluator are built on top of it
**Depends on:** Phase 1
**Constraints:**
  - Rust implementation — no Python/pytest dependency. Integrate with existing Cargo workspace and conformance infrastructure.
  - LLM API calls via Anthropic Rust SDK or direct HTTP (reqwest). Model disagreement with ground truth = spec ambiguity signal.
  - Ground truth comes from the elaborator's conformance suite expected outputs, not from a separate oracle.
**Plans:** 2/2 plans complete

Plans:
- [x] 01.1-01-PLAN.md — Core modules: API client, prompt builder, verdict comparator, fixture loader, TAP reporter, and synthetic test cases
- [x] 01.1-02-PLAN.md — Orchestrator wiring and CLI subcommand integration

### Phase 2: Foundation
**Goal**: The monolithic elaborator is refactored into a Cargo workspace with `tenor-core` exposing typed pass outputs as public API, all existing tests pass, and conformance suite covers new v1.0 constructs
**Depends on**: Phase 1
**Requirements**: FNDN-01, FNDN-02, FNDN-03, FNDN-04, TEST-01, TEST-02, TEST-08
**Success Criteria** (what must be TRUE):
  1. `elaborate.rs` is decomposed into per-pass modules within a `tenor-core` library crate
  2. Cargo workspace contains separate crates for core, cli, eval, analyze, codegen, and lsp
  3. All 47 original conformance tests continue to pass without modification
  4. Downstream crates can import and use typed AST, Index, and TypeEnv from `tenor-core`
  5. Conformance suite includes tests for persona declaration, P7 outcome typing, P5 shared types, and interchange schema validation
  6. CI pipeline runs all conformance suites on every commit
**Plans:** 4/4 plans complete

Plans:
- [x] 02-01-PLAN.md — Cargo workspace + tenor-core pass module extraction + tenor-cli binary crate
- [x] 02-02-PLAN.md — Public API design, stub crates (eval, analyze, codegen, lsp), README/CLAUDE.md update
- [x] 02-03-PLAN.md — Implement persona, Operation outcomes, tenor_version; update all fixtures to v1.0
- [x] 02-04-PLAN.md — Conformance extension (persona/outcomes/shared types), schema validation test, CI pipeline

### Phase 3: CLI + Evaluator
**Goal**: Users can elaborate, validate, evaluate, and test contracts through a unified `tenor` command-line tool, with the evaluator producing provenance-traced verdicts against fact sets
**Depends on**: Phase 2
**Requirements**: CLI-01, CLI-02, CLI-03, CLI-05, CLI-07, CLI-09, EVAL-01, EVAL-02, EVAL-03, EVAL-04, EVAL-05, EVAL-06, EVAL-07, TEST-07, TEST-09, MIGR-01
**Success Criteria** (what must be TRUE):
  1. `tenor elaborate <file>` produces interchange JSON to stdout identical to current elaborator output
  2. `tenor validate <bundle.json>` validates interchange against the formal JSON Schema
  3. `tenor eval <bundle.json> --facts <facts.json>` produces a verdict set where every verdict carries its complete derivation chain
  4. `tenor test` runs the full conformance suite and reports results
  5. Evaluator correctly implements frozen verdict semantics and fixed-point numeric arithmetic matching the spec NumericModel
  6. `tenor diff <t1.json> <t2.json>` produces structured diff of two interchange bundles showing added, removed, and changed constructs
**Plans:** 7/7 plans complete

Plans:
- [x] 03-01-PLAN.md — CLI shell with clap (elaborate, validate, test, stub subcommands, global flags)
- [x] 03-02-PLAN.md — Evaluator core: types, numeric model, fact assembly, predicate eval, stratified rules
- [x] 03-03-PLAN.md — Operation execution and Flow execution with frozen verdict semantics
- [x] 03-04-PLAN.md — `tenor diff` subcommand: construct-level interchange bundle diff
- [x] 03-05-PLAN.md — CLI eval subcommand wiring + CLI integration tests (assert_cmd)
- [x] 03-06-PLAN.md — Evaluator conformance suite (20+ fixtures) + numeric precision regression (50+ cases)
- [x] 03-07-PLAN.md — Gap closure: file-based numeric fixtures + REQUIREMENTS.md status updates

### Phase 3.1: CFFP — Migration Semantics (INSERTED)

**Goal:** CFFP-derived breaking change taxonomy and versioning/migration spec section — defining what constitutes a breaking vs non-breaking contract change, executor obligations for contract version transitions, and mandatory in-flight flow migration policy declaration
**Depends on:** Phase 3
**Constraints:**
  - CFFP protocol: invariant declaration, candidate formalisms, pressure testing, canonical form. Same rigor as Phase 1 spec work.
  - Output is spec prose (new section in TENOR.md) plus a formal breaking-change taxonomy that Phase 4's `tenor diff --breaking` implements.
  - In-flight flow migration policy: spec requires executors to declare their policy (blue-green, force-migrate, or abort), not prescribe which one.
**Requirements**: MIGR-02, MIGR-04
**Success Criteria** (what must be TRUE):
  1. Breaking change taxonomy classifies every construct change type (entity state add/remove, fact type widen/narrow, rule add/remove, verdict removal, flow step changes) as breaking or non-breaking with precise rules
  2. TENOR.md contains a Versioning & Migration section defining executor obligations for contract version transitions
  3. Spec requires executors to declare an in-flight flow migration policy when deploying a new contract version
  4. Each classification rule has been pressure-tested through CFFP with edge cases
**Plans:** 2/2 plans complete

Plans:
- [x] 03.1-01-PLAN.md — CFFP run for migration semantics (diff representation + breaking change taxonomy)
- [x] 03.1-02-PLAN.md — Versioning & Migration spec section in TENOR.md (executor obligations, in-flight flow policy)

### Phase 03.2: Technical Debt, Bug Fixes & Missing Eval Features (INSERTED)

**Goal:** Resolve all critical bugs, implement deferred eval features (ParallelStep, Compensate, Escalate, flow persona auth), clean up tech debt (unwrap fragility, string-match retry, dead code, workspace dep drift), and close test coverage gaps identified in codebase concerns audit
**Depends on:** Phase 3
**Requirements:** None (remediation work — success tracked by criteria below, not v1.0 requirement IDs; TEST-03 belongs to Phase 4)
**Success Criteria** (what must be TRUE):
  1. No panics possible from valid contract inputs (precision overflow fixed)
  2. No silent incorrect behavior (Money currency, Duration unit, Date format, multi-outcome routing all validated)
  3. ParallelStep, Compensate, and Escalate fully functional in evaluator with test coverage
  4. Flow-level persona authorization implemented or documented per spec
  5. All EvalError variants semantically correct (no TypeError for non-type errors)
  6. Tech debt items from codebase concerns audit resolved
  7. All existing tests still pass (cargo test --workspace)
**Plans:** 3/3 plans complete

Plans:
- [x] 03.2-01-PLAN.md — Critical bug fixes (precision panic, Money currency, multi-outcome routing, Date validation) + EvalError variants + Duration support + tests
- [x] 03.2-02-PLAN.md — Tech debt cleanup (unwrap audit, ambiguity retry logic, dead code, workspace deps)
- [x] 03.2-03-PLAN.md — Missing eval features (ParallelStep, Compensate, Escalate, persona provenance) + conformance tests

### Phase 3.3: CFFP — Flow Migration Compatibility (INSERTED)

**Goal:** CFFP-derived formal definition of flow-level migration compatibility — when an in-progress flow can be force-migrated from v1 to v2 vs. when it requires a coexistence layer (v1.5), covering forward path existence, backward data dependency satisfaction, and the directional asymmetry problem (v2 steps may require state that v1 never established)
**Depends on:** Phase 3.1, Phase 3.2
**Constraints:**
  - CFFP protocol: invariant declaration, candidate formalisms, pressure testing, canonical form. Same rigor as Phase 1 and Phase 3.1 spec work.
  - Output is spec prose (extending §17 in TENOR.md) plus a formal flow compatibility definition that Phase 4's `tenor diff --breaking` can reference for flow-level analysis.
  - Builds on §17.4 migration policies (blue-green, force-migrate, abort) — this phase makes force-migrate precise by defining when it's safe.
  - The coexistence layer pattern (v1.5) is documented as an executor implementation strategy, not prescribed by the spec.
**Requirements**: MIGR-02, MIGR-04
**Success Criteria** (what must be TRUE):
  1. Formal definition: a flow is force-migratable from v1 to v2 at position p if (a) every step in every reachable future path has a v2 equivalent, (b) all data dependencies of those v2 steps are satisfiable from existing provenance/frozen snapshot/safe defaults, and (c) entity states at current position have v2 equivalents
  2. Directional asymmetry documented: forward path compatibility alone is insufficient — v2 steps may require state/knowledge that v1 never established (the "missing prerequisite" problem)
  3. Coexistence layer pattern formally described: new flows on v2, incompatible in-progress flows on v1 runtime, translation on exit
  4. Each compatibility condition pressure-tested through CFFP with concrete flow scenarios (escrow, multi-week approval, subscription lifecycle)
  5. §17 in TENOR.md extended with flow compatibility subsection cross-referencing S6 (flow path enumeration) for implementation
**Plans:** 2/2 plans complete

Plans:
- [x] 03.3-01-PLAN.md — CFFP run for flow migration compatibility (invariants, candidates, pressure testing, canonical form)
- [x] 03.3-02-PLAN.md — Flow compatibility spec section in TENOR.md (Section 17.6, Appendix A, cross-references)

### Phase 03.4: Contract Discovery (INSERTED)

**Goal:** The §18 Contract Discovery & Agent Orientation spec section has tooling support — a manifest JSON Schema artifact, `tenor elaborate --manifest` producing TenorManifest output with inlined bundle and etag, and manifest schema validation
**Depends on:** Phase 3.3
**Constraints:**
  - Manifest schema is a separate JSON Schema file (`docs/manifest-schema.json`) referencing the interchange schema
  - `--manifest` flag extends the existing `elaborate` subcommand — no new subcommand
  - Etag computation: `lowercase_hex(SHA-256(canonical_json_bytes(bundle)))` using the elaborator's deterministic Pass 6 output
  - Manifest top-level keys sorted lexicographically: `bundle`, `etag`, `tenor`
**Requirements**: SPEC-08, CLI-10
**Success Criteria** (what must be TRUE):
  1. `docs/manifest-schema.json` exists, validates TenorManifest documents, and references the interchange schema for the `bundle` field
  2. `tenor elaborate --manifest <file.tenor>` produces a valid TenorManifest with the interchange bundle inlined and a correct SHA-256 etag
  3. `tenor validate` can validate manifest documents against the manifest schema (in addition to interchange bundles against the interchange schema)
  4. Conformance tests cover manifest generation (correct etag, correct structure, deterministic output)
**Plans:** 2/2 plans complete

Plans:
- [x] 03.4-01-PLAN.md — `--manifest` flag, etag computation, manifest envelope, manifest-aware validate
- [x] 03.4-02-PLAN.md — Manifest conformance tests and runner integration

### Phase 4: Static Analysis
**Goal**: Users can run `tenor check` to get comprehensive static analysis (S1-S8) of their contracts, with structured output consumable by both CLI and future LSP. Includes elaboration validation gap closure (FactSource format validation, operation I/O relationship checks).
**Depends on**: Phase 3.4
**Requirements**: ANLZ-01, ANLZ-02, ANLZ-03, ANLZ-04, ANLZ-05, ANLZ-06, ANLZ-07, ANLZ-08, CLI-04, TEST-03, MIGR-03, MIGR-05
**Success Criteria** (what must be TRUE):
  1. `tenor check <file>` runs elaboration followed by all eight static analyses and reports findings
  2. Entity state space enumeration (S1), rule stratum reachability (S2), and domain coverage (S3a) produce correct results on known contracts
  3. Authority topology (S4), operation effect analysis (S5), flow path enumeration (S6), and complexity bounds (S7) produce correct results on known contracts
  4. Analyzer output is structured (not just text) and suitable for programmatic consumption by CLI and LSP
  5. Each S1-S8 analysis has test coverage with known-good and known-bad contracts
  6. `tenor diff --breaking` classifies each change using S1-S8 analysis outputs and reports required migration actions per the CFFP-derived taxonomy from Phase 3.1
**Plans**: 8/8 plans complete

Plans:
- [x] 04-01-PLAN.md — Analyzer crate structure, bundle deserialization, and S1 entity state space enumeration
- [x] 04-02-PLAN.md — S2 reachable states (dead state detection) and S3a structural admissibility
- [x] 04-03-PLAN.md — S4 authority topology mapping and S5 verdict/outcome space enumeration
- [x] 04-04-PLAN.md — S6 flow path enumeration and S7 evaluation complexity bounds
- [x] 04-05-PLAN.md — S8 verdict uniqueness confirmation, AnalysisReport aggregation, and analyze() API
- [x] 04-06-PLAN.md — `tenor check` CLI integration with text and JSON output modes
- [x] 04-07-PLAN.md — Analyzer test suite with dedicated analysis fixtures
- [x] 04-08-PLAN.md — `tenor diff --breaking` breaking change classification using Section 17.2 taxonomy

### Phase 5: Domain Validation
**Goal**: Five real contracts across distinct business domains elaborate, pass static analysis, and evaluate correctly — proving the spec handles real-world complexity before code generation begins. Includes executor conformance validation: E10-E14 (manifest serving, cold-start, change detection, dry-run evaluation, discovery) tested against domain contracts.
**Depends on**: Phase 4
**Requirements**: DOMN-01, DOMN-02, DOMN-03, DOMN-04, DOMN-05, DOMN-06, DOMN-07, DOMN-08, DOMN-09, CLI-06, TEST-11
**Success Criteria** (what must be TRUE):
  1. Multi-tenant SaaS contract (seats, feature flags, subscriptions) elaborates, checks, and evaluates with correct provenance
  2. Healthcare prior auth contract (policy rules, peer review, appeals) elaborates, checks, and evaluates with correct provenance
  3. Supply chain contract (customs, inspection, release gates) elaborates, checks, and evaluates with correct provenance
  4. Internal procurement contract (approval tiers, delegation, budget) and financial domain contract each elaborate, check, and evaluate correctly
  5. `tenor explain <bundle.json>` produces a human-readable contract summary, and a spec gap report documents all findings from domain validation
**Plans**: 8 plans

Plans:
- [x] 05-01-PLAN.md — SaaS subscription contract (SMALL: entity states, simple rules, feature-flag enums, basic operations)
- [x] 05-02-PLAN.md — Healthcare prior auth contract (LARGE: deep flows, escalation, sub-flows, multi-stratum rules, 5+ personas)
- [x] 05-03-PLAN.md — Supply chain inspection contract (MEDIUM: parallel steps, compensation, entity hierarchies, multi-file imports)
- [x] 05-04-PLAN.md — Energy procurement RFP workflow (MEDIUM-LARGE: approval tiers, Money types, delegation, escalation)
- [x] 05-05-PLAN.md — Trade finance letter of credit (MEDIUM: multi-party personas, deadline rules, Money types, document entity states)
- [x] 05-06-PLAN.md — `tenor explain` subcommand (styled terminal + markdown, 4-section output, --verbose)
- [x] 05-07-PLAN.md — Spec gap report synthesis (all domain findings aggregated with severity classification)
- [x] 05-08-PLAN.md — Executor conformance tests (E10-E13: manifest serving, cold-start, change detection, dry-run)

### Phase 05.1: Fix critical DSL gaps before v1-complete (INSERTED)

**Goal:** Close the four highest-priority DSL gaps identified during Phase 5 domain validation -- effect-to-outcome mapping syntax for multi-outcome operations (GAP-006/010/013), bounded existential quantification (GAP-003), S6 escalation path tracing (GAP-007), and CLI flow evaluation (GAP-008) -- enabling contract authors to express multi-outcome operations naturally and use the exists quantifier directly
**Depends on:** Phase 5
**Requirements:** SPEC-02, CLI-02, CLI-05, ANLZ-06
**Plans:** 3/3 plans complete

Plans:
- [x] 05.1-01-PLAN.md — Effect-to-outcome mapping syntax (parser, AST, Pass5, Pass6, conformance tests)
- [x] 05.1-02-PLAN.md — Exists quantifier (lexer, parser, schema, evaluator, conformance tests)
- [x] 05.1-03-PLAN.md — S6 escalation path tracing + CLI flow evaluation (--flow, --persona flags)

### Phase 6: Documentation
**Goal**: Tenor authors and executor implementers each have dedicated documentation covering their use case — language reference, authoring guide, and executor guide ship with v1
**Depends on**: Phase 12 (documentation covers full v1.0 spec including System construct)
**Requirements**: DEVX-05, DEVX-06, DEVX-07
**Success Criteria** (what must be TRUE):
  1. Language reference documents every construct, type, and expression form with author-facing examples (distinct from the implementer spec)
  2. Authoring guide walks through complete worked examples across multiple domains
  3. Executor implementation guide explains how to build a runtime that correctly evaluates Tenor contracts
**Plans**: TBD

Plans:
- [ ] 06-01: Language reference (author-facing, mdBook)
- [ ] 06-02: Authoring guide with worked domain examples
- [ ] 06-03: Executor implementation guide

### Phase 7: TypeScript Code Generation
**Goal**: Users can generate TypeScript code from interchange bundles using a ports-and-adapters pattern, with generated code producing identical verdicts to the reference evaluator
**Depends on**: Phase 5
**Requirements**: CGEN-01, CGEN-02, CGEN-03, CGEN-04, CGEN-05, CGEN-07, CLI-08, TEST-04
**Success Criteria** (what must be TRUE):
  1. `tenor generate <bundle.json> --target typescript` produces compilable TypeScript implementing entity store, rule engine, operation handlers, flow orchestrator, and provenance collector
  2. Generated code exposes port interfaces (fact sources, persona resolver, state store, provenance repo) for developer-supplied adapters
  3. `@tenor/adapters-local` package provides in-memory adapter implementations for dev/test use
  4. Generated TypeScript uses fixed-point decimal (not native `number`) for Money and Decimal types
  5. Generated code produces the same verdicts as the reference evaluator when run against the evaluator conformance suite
**Plans**: TBD

Plans:
- [ ] 07-01: Codegen crate with tera templates and ports-and-adapters TypeScript skeleton
- [ ] 07-02: Entity store, rule engine, and operation handler generation
- [ ] 07-03: Flow orchestrator, provenance collector, and port interfaces
- [ ] 07-04: Fixed-point decimal handling and numeric type mapping
- [ ] 07-05: `@tenor/adapters-local` package with in-memory implementations
- [ ] 07-06: `tenor generate` CLI subcommand and integration tests

### Phase 8: Rust Code Generation
**Goal**: Rust code generation target works end-to-end, with generated code producing identical verdicts to the reference evaluator
**Depends on**: Phase 7
**Requirements**: CGEN-06, TEST-05
**Success Criteria** (what must be TRUE):
  1. `tenor generate <bundle.json> --target rust` produces compilable Rust code using the same ports-and-adapters pattern as TypeScript
  2. Generated Rust code produces the same verdicts as the reference evaluator against the conformance suite
  3. Domain validation contracts serve as end-to-end integration tests for the Rust target
**Plans**: TBD

Plans:
- [ ] 08-01: Rust code generation templates and target implementation
- [ ] 08-02: Rust codegen integration tests (conformance parity)

### Phase 9: Go Code Generation
**Goal**: Go code generation target works end-to-end, with generated code producing identical verdicts to the reference evaluator
**Depends on**: Phase 7
**Requirements**: CGEN-08, CGEN-09, TEST-06, TEST-10
**Success Criteria** (what must be TRUE):
  1. `tenor generate <bundle.json> --target go` produces compilable Go code using the same ports-and-adapters pattern
  2. Generated Go code produces the same verdicts as the reference evaluator against the conformance suite
  3. Domain validation contracts serve as end-to-end integration tests for the Go target
**Plans**: TBD

Plans:
- [ ] 09-01: Go code generation templates and target implementation
- [ ] 09-02: Go codegen integration tests (conformance parity)

### Phase 10: Code Generation Guide
**Goal**: Documentation explaining the ports-and-adapters pattern, how to write custom adapters, and how to use generated code across all three targets
**Depends on**: Phase 7 (TypeScript target provides primary examples; Rust/Go if complete)
**Requirements**: DEVX-08
**Success Criteria** (what must be TRUE):
  1. Code generation guide explains the ports-and-adapters pattern and how to write custom adapters
  2. Guide includes worked examples for TypeScript (and Rust/Go if available)
  3. Guide covers fixed-point decimal handling and numeric type mapping
**Plans**: TBD

Plans:
- [ ] 10-01: Code generation guide

### Phase 11: VS Code Extension
**Goal**: Tenor authors get real-time feedback in VS Code with syntax highlighting, inline errors, check-on-save, and go-to-definition for construct references
**Depends on**: Phase 4 (needs tenor-core + tenor-analyze)
**Requirements**: DEVX-01, DEVX-02, DEVX-03, DEVX-04
**Success Criteria** (what must be TRUE):
  1. `.tenor` files have syntax highlighting via TextMate grammar in VS Code
  2. Elaboration errors appear as inline diagnostics at the correct file and line
  3. Saving a `.tenor` file automatically runs `tenor check` and displays results
  4. Go-to-definition navigates from construct references to their declarations
**Plans**: TBD

Plans:
- [ ] 11-01: TextMate grammar and VS Code extension scaffold
- [ ] 11-02: LSP server with inline error diagnostics
- [ ] 11-03: Check-on-save and go-to-definition

### Phase 12: System Construct
**Goal**: Multi-contract composition — a System construct that formally relates contracts to each other, enabling shared persona identity, cross-contract flow triggers, and cross-contract entity relationships. Gates v1.0 spec freeze.
**Depends on**: Phase 6 (documentation establishes v0.9 baseline)
**Requirements**: TBD (CFFP run will derive requirements)
**Constraints:**
  - CFFP protocol required: invariant declaration, candidate formalisms, pressure testing, canonical form
  - System is a new construct touching the full stack: spec section, elaborator passes, interchange representation, static analysis, executor obligations, conformance tests
  - v0.9 spec is frozen — System is the only additive change permitted before v1.0 freeze
**Success Criteria** (what must be TRUE):
  1. System construct has formal syntax, semantics, and interchange representation in `docs/TENOR.md`
  2. Member contracts can be declared within a System
  3. Shared persona identity is expressible (same actor across contracts)
  4. Cross-contract flow triggers are expressible (completion of flow A initiates flow B)
  5. Cross-contract entity relationships are expressible (entity in contract A is the same entity in contract B)
  6. Elaborator validates System constructs (Pass 5) and serializes to interchange (Pass 6)
  7. Static analysis extended for cross-contract authority topology and flow path enumeration
  8. Executor obligations defined for cross-contract snapshot coordination and persona resolution
  9. Conformance tests cover System construct elaboration
**Plans**: TBD (run /gsd:plan-phase 12 after CFFP)

Plans:
- [ ] TBD (CFFP run required before planning)

## Progress

**Execution Order:**
Phases execute in numeric order within each milestone: 1 -> ... -> 5.1 | 12 (CFFP) -> 6 -> 7 -> 8, 9 (parallel) -> 10 -> 11
Note: Phase 8 (Rust) and Phase 9 (Go) both depend on Phase 7 (TypeScript) and can execute in parallel.
Note: Phase 11 (VS Code) depends on Phase 4 (not Phase 9) and could start as soon as M1 completes.
Note: Phase 12 (System Construct) gates v1.0 freeze. Milestone 3 depends on Milestone 2 — code generation targets v1.0 interchange (including System construct).
Note: Phase 3.1 (CFFP Migration Semantics) must complete before Phase 4 — the breaking change taxonomy feeds `tenor diff --breaking`. (DONE)
Note: Phase 3.3 (Flow Migration Compatibility) must complete before Phase 4 — the flow compatibility definition feeds `tenor diff --breaking` flow-level analysis. (DONE)
Note: Phase 3.4 (Contract Discovery) must complete before Phase 4 — manifest generation is needed for executor conformance validation in Phase 5. (DONE)

### Milestone 1: v0.9 Core (COMPLETE)

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. Spec Completion | 5/5 | Complete | 2026-02-21 |
| 01.1. Spec CI — AI Ambiguity Testing | 2/2 | Complete | 2026-02-21 |
| 2. Foundation | 4/4 | Complete | 2026-02-21 |
| 3. CLI + Evaluator | 7/7 | Complete | 2026-02-21 |
| 3.1. CFFP — Migration Semantics | 2/2 | Complete | 2026-02-22 |
| 3.2. Technical Debt & Bug Fixes | 3/3 | Complete | 2026-02-22 |
| 3.3. Flow Migration Compatibility | 2/2 | Complete | 2026-02-22 |
| 3.4. Contract Discovery | 2/2 | Complete | 2026-02-22 |
| 4. Static Analysis | 8/8 | Complete | 2026-02-22 |
| 5. Domain Validation | 5/8 | Complete | 2026-02-22 |
| 05.1. Fix Critical DSL Gaps | 3/3 | Complete | 2026-02-22 |

### Milestone 2: v1.0 — System Construct + Documentation

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 12. System Construct (CFFP) | 0/TBD | Not started | - |
| 6. Documentation | 0/3 | Not started | - |

### Milestone 3: Developer Experience

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 7. TypeScript Code Generation | 0/6 | Not started | - |
| 8. Rust Code Generation | 0/2 | Not started | - |
| 9. Go Code Generation | 0/2 | Not started | - |
| 10. Code Generation Guide | 0/1 | Not started | - |
| 11. VS Code Extension | 0/3 | Not started | - |
