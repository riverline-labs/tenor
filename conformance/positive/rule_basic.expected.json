{
  "constructs": [
    {
      "id": "balance",
      "kind": "Fact",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 10
      },
      "source": {
        "field": "balance",
        "system": "account_service"
      },
      "tenor": "1.0",
      "type": {
        "base": "Money",
        "currency": "USD"
      }
    },
    {
      "id": "credit_limit",
      "kind": "Fact",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 15
      },
      "source": {
        "field": "credit_limit",
        "system": "account_service"
      },
      "tenor": "1.0",
      "type": {
        "base": "Money",
        "currency": "USD"
      }
    },
    {
      "id": "is_active",
      "kind": "Fact",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 5
      },
      "source": {
        "field": "active",
        "system": "account_service"
      },
      "tenor": "1.0",
      "type": {
        "base": "Bool"
      }
    },
    {
      "id": "line_items",
      "kind": "Fact",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 20
      },
      "source": {
        "field": "line_items",
        "system": "order_service"
      },
      "tenor": "1.0",
      "type": {
        "base": "List",
        "element_type": {
          "base": "Record",
          "fields": {
            "amount": {
              "base": "Money",
              "currency": "USD"
            },
            "approved": {
              "base": "Bool"
            }
          }
        },
        "max": 50
      }
    },
    {
      "body": {
        "produce": {
          "payload": {
            "type": {
              "base": "Bool"
            },
            "value": true
          },
          "verdict_type": "account_active"
        },
        "when": {
          "left": {
            "fact_ref": "is_active"
          },
          "op": "=",
          "right": {
            "literal": true,
            "type": {
              "base": "Bool"
            }
          }
        }
      },
      "id": "account_active",
      "kind": "Rule",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 27
      },
      "stratum": 0,
      "tenor": "1.0"
    },
    {
      "body": {
        "produce": {
          "payload": {
            "type": {
              "base": "Bool"
            },
            "value": true
          },
          "verdict_type": "all_items_approved"
        },
        "when": {
          "body": {
            "left": {
              "field_ref": {
                "field": "approved",
                "var": "item"
              }
            },
            "op": "=",
            "right": {
              "literal": true,
              "type": {
                "base": "Bool"
              }
            }
          },
          "domain": {
            "fact_ref": "line_items"
          },
          "quantifier": "forall",
          "variable": "item",
          "variable_type": {
            "base": "Record",
            "fields": {
              "amount": {
                "base": "Money",
                "currency": "USD"
              },
              "approved": {
                "base": "Bool"
              }
            }
          }
        }
      },
      "id": "all_items_approved",
      "kind": "Rule",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 39
      },
      "stratum": 0,
      "tenor": "1.0"
    },
    {
      "body": {
        "produce": {
          "payload": {
            "type": {
              "base": "Bool"
            },
            "value": true
          },
          "verdict_type": "within_credit_limit"
        },
        "when": {
          "comparison_type": {
            "base": "Money",
            "currency": "USD"
          },
          "left": {
            "fact_ref": "balance"
          },
          "op": "<=",
          "right": {
            "fact_ref": "credit_limit"
          }
        }
      },
      "id": "within_credit_limit",
      "kind": "Rule",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 33
      },
      "stratum": 0,
      "tenor": "1.0"
    },
    {
      "body": {
        "produce": {
          "payload": {
            "type": {
              "base": "Bool"
            },
            "value": true
          },
          "verdict_type": "order_processable"
        },
        "when": {
          "left": {
            "left": {
              "verdict_present": "account_active"
            },
            "op": "and",
            "right": {
              "verdict_present": "within_credit_limit"
            }
          },
          "op": "and",
          "right": {
            "verdict_present": "all_items_approved"
          }
        }
      },
      "id": "can_process_order",
      "kind": "Rule",
      "provenance": {
        "file": "rule_basic.tenor",
        "line": 47
      },
      "stratum": 1,
      "tenor": "1.0"
    }
  ],
  "id": "rule_basic",
  "kind": "Bundle",
  "tenor": "1.0",
  "tenor_version": "1.0.0"
}
